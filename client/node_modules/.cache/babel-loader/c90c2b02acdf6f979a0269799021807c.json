{"ast":null,"code":"import _regeneratorRuntime from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/src/components/TodoList.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport TodoForm from \"./TodoForm\";\nimport Todo from \"./Todo\";\nimport { fetchTodos, toggleTodo, deleteTodo, toggleTab } from \"../actions\";\nimport { TABS } from \"../actions/types\";\n\nvar TodoList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TodoList, _Component);\n\n  function TodoList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TodoList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TodoList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.props.fetchTodos();\n\n              try {\n                setInterval(\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee() {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _this.props.fetchTodos();\n\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                })), 10000);\n              } catch (e) {\n                console.log(e);\n              }\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.removeComplete = function () {\n      _this.props.todos.forEach(function (_ref3) {\n        var complete = _ref3.complete,\n            _id = _ref3._id;\n        if (complete) _this.props.deleteTodo(_id);\n      });\n    };\n\n    _this.renderTodos = function (todos) {\n      return todos.map(function (todo) {\n        return React.createElement(Todo, {\n          key: todo._id,\n          id: todo._id,\n          name: todo.name,\n          complete: todo.complete,\n          toggleTodo: function toggleTodo() {\n            return _this.props.toggleTodo(todo._id);\n          },\n          deleteTodo: function deleteTodo() {\n            return _this.props.deleteTodo(todo._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29\n          },\n          __self: this\n        });\n      });\n    };\n\n    _this.renderTabs = function (currTab) {\n      return TABS.map(function (tab) {\n        return React.createElement(\"button\", {\n          key: tab,\n          className: tab === currTab ? \"button selected\" : \"button\",\n          onClick: function onClick() {\n            return _this.props.toggleTab(tab);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, tab);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(TodoList, [{\n    key: \"render\",\n    value: function render() {\n      var todos = [];\n\n      if (this.props.currTab === \"all\") {\n        todos = this.props.todos;\n      } else if (this.props.currTab === \"active\") {\n        todos = this.props.todos.filter(function (todo) {\n          return !todo.complete;\n        });\n      } else if (this.props.currTab === \"complete\") {\n        todos = this.props.todos.filter(function (todo) {\n          return todo.complete;\n        });\n      }\n\n      return React.createElement(\"article\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(TodoForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), this.props.todos.length ? React.createElement(\"div\", {\n        style: {\n          marginBottom: 20,\n          marginLeft: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, this.props.todos.filter(function (todo) {\n        return !todo.complete;\n      }).length, \" todos left\") : null, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, this.props.todos.length ? this.renderTabs(this.props.currTab) : null, this.props.todos.some(function (todo) {\n        return todo.complete;\n      }) ? React.createElement(\"button\", {\n        className: \"button clear\",\n        onClick: this.removeComplete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"remove complete\") : null), React.createElement(\"ul\", {\n        style: {\n          paddingLeft: 10\n        },\n        className: \"list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, this.renderTodos(todos)));\n    }\n  }]);\n\n  return TodoList;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_ref4) {\n  var todos = _ref4.todos,\n      currTab = _ref4.currTab;\n  return {\n    todos: todos,\n    currTab: currTab\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchTodos: fetchTodos,\n  toggleTodo: toggleTodo,\n  deleteTodo: deleteTodo,\n  toggleTab: toggleTab\n})(TodoList);","map":{"version":3,"sources":["/home/dennis/桌面/midterm_ToDoList/client/src/components/TodoList.js"],"names":["React","Component","connect","TodoForm","Todo","fetchTodos","toggleTodo","deleteTodo","toggleTab","TABS","TodoList","componentDidMount","props","setInterval","e","console","log","removeComplete","todos","forEach","complete","_id","renderTodos","map","todo","name","renderTabs","currTab","tab","filter","length","marginBottom","marginLeft","some","paddingLeft","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport TodoForm from \"./TodoForm\";\nimport Todo from \"./Todo\";\nimport { fetchTodos, toggleTodo, deleteTodo, toggleTab } from \"../actions\";\nimport { TABS } from \"../actions/types\";\n\nclass TodoList extends Component {\n  componentDidMount = async () => {\n    this.props.fetchTodos();\n    try {\n      setInterval(async () => {\n        this.props.fetchTodos();\n      }, 10000);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  removeComplete = () => {\n    this.props.todos.forEach(({ complete, _id }) => {\n      if (complete) this.props.deleteTodo(_id);\n    });\n  };\n\n  renderTodos = todos => {\n    return todos.map(todo => {\n      return (\n        <Todo\n          key={todo._id}\n          id={todo._id}\n          name={todo.name}\n          complete={todo.complete}\n          toggleTodo={() => this.props.toggleTodo(todo._id)}\n          deleteTodo={() => this.props.deleteTodo(todo._id)}\n        />\n      );\n    });\n  };\n\n  renderTabs = currTab => {\n    return TABS.map(tab => {\n      return (\n        <button\n          key={tab}\n          className={tab === currTab ? \"button selected\" : \"button\"}\n          onClick={() => this.props.toggleTab(tab)}\n        >\n          {tab}\n        </button>\n      );\n    });\n  };\n\n  render() {\n    let todos = [];\n\n    if (this.props.currTab === \"all\") {\n      todos = this.props.todos;\n    } else if (this.props.currTab === \"active\") {\n      todos = this.props.todos.filter(todo => !todo.complete);\n    } else if (this.props.currTab === \"complete\") {\n      todos = this.props.todos.filter(todo => todo.complete);\n    }\n\n    return (\n      <article>\n        <TodoForm />\n        {this.props.todos.length ? (\n          <div style={{ marginBottom: 20, marginLeft: 10 }}>\n            {this.props.todos.filter(todo => !todo.complete).length} todos left\n          </div>\n        ) : null}\n\n        <div>\n          {this.props.todos.length ? this.renderTabs(this.props.currTab) : null}\n          {this.props.todos.some(todo => todo.complete) ? (\n            <button className=\"button clear\" onClick={this.removeComplete}>\n              remove complete\n            </button>\n          ) : null}\n        </div>\n\n        <ul style={{ paddingLeft: 10 }} className=\"list\">\n          {this.renderTodos(todos)}\n        </ul>\n      </article>\n    );\n  }\n}\n\nconst mapStateToProps = ({ todos, currTab }) => {\n  return { todos, currTab };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchTodos, toggleTodo, deleteTodo, toggleTab }\n)(TodoList);\n"]},"metadata":{},"sourceType":"module"}