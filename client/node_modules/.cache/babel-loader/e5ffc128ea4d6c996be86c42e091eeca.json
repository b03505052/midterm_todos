{"ast":null,"code":"import _regeneratorRuntime from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/src/components/TodoList.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport TodoForm from \"./TodoForm\";\nimport Todo from \"./Todo\";\nimport { fetchTodos, toggleTodo, deleteTodo, toggleTab } from \"../actions\";\nimport { TABS } from \"../actions/types\";\n\nvar TodoList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TodoList, _Component);\n\n  function TodoList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TodoList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TodoList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.props.fetchTodos();\n\n              try {\n                setInterval(\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee() {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _this.props.fetchTodos();\n\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                })), 10000);\n              } catch (e) {\n                console.log(e);\n              }\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.removeComplete = function () {\n      _this.props.todos.forEach(function (_ref3) {\n        var done = _ref3.done,\n            _id = _ref3._id;\n        if (done) _this.props.deleteTodo(_id);\n      });\n    };\n\n    _this.renderTodos = function (todos) {\n      return todos.map(function (todo) {\n        return React.createElement(Todo, {\n          key: todo._id,\n          id: todo._id,\n          name: todo.name,\n          done: todo.done,\n          toggleTodo: function toggleTodo() {\n            return _this.props.toggleTodo(todo._id);\n          },\n          deleteTodo: function deleteTodo() {\n            return _this.props.deleteTodo(todo._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29\n          },\n          __self: this\n        });\n      });\n    };\n\n    _this.renderTabs = function (currTab) {\n      return TABS.map(function (tab) {\n        return React.createElement(\"button\", {\n          key: tab,\n          className: tab === currTab ? \"button selected\" : \"button\",\n          onClick: function onClick() {\n            return _this.props.toggleTab(tab);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, tab);\n      });\n    };\n\n    _this.rendershowMode = function (currMode) {\n      return _this.state.showMode.map(function (tab) {\n        return React.createElement(\"button\", {\n          key: tab,\n          className: tab === currMode ? \"button selected\" : \"button\",\n          onClick: function onClick() {\n            return _this.toggleTodoTab(tab);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, tab);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(TodoList, [{\n    key: \"render\",\n    value: function render() {\n      var showTodos = [];\n\n      if (this.state.currMode === \"all\") {\n        showTodos = this.state.todos;\n      } else if (this.state.currMode === \"active\") {\n        showTodos = this.state.todos.filter(function (todo) {\n          return !todo.complete;\n        });\n      } else if (this.state.currMode === \"complete\") {\n        showTodos = this.state.todos.filter(function (todo) {\n          return todo.complete;\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(TodoForm, {\n        onSubmit: this.addTodo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        className: \"todo-app__list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, this.renderTodos(showTodos)), React.createElement(\"footer\", {\n        className: \"todo-app__footer\",\n        id: \"todo-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"todo-app__total\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"todos left: \", this.state.todos.filter(function (todo) {\n        return !todo.complete;\n      }).length), React.createElement(\"ul\", {\n        className: \"todo-app__view-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, this.rendershowMode(this.state.currMode)), React.createElement(\"ul\", {\n        className: \"todo-app__clean\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, this.state.todos.some(function (todo) {\n        return todo.complete;\n      }) ? React.createElement(\"button\", {\n        className: \"button clear\",\n        onClick: this.removeComplete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"remove completed\") : null)));\n    }\n  }]);\n\n  return TodoList;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_ref4) {\n  var todos = _ref4.todos,\n      currTab = _ref4.currTab;\n  return {\n    todos: todos,\n    currTab: currTab\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchTodos: fetchTodos,\n  toggleTodo: toggleTodo,\n  deleteTodo: deleteTodo,\n  toggleTab: toggleTab\n})(TodoList);","map":{"version":3,"sources":["/home/dennis/桌面/midterm_ToDoList/client/src/components/TodoList.js"],"names":["React","Component","connect","TodoForm","Todo","fetchTodos","toggleTodo","deleteTodo","toggleTab","TABS","TodoList","componentDidMount","props","setInterval","e","console","log","removeComplete","todos","forEach","done","_id","renderTodos","map","todo","name","renderTabs","currTab","tab","rendershowMode","currMode","state","showMode","toggleTodoTab","showTodos","filter","complete","addTodo","length","some","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport TodoForm from \"./TodoForm\";\nimport Todo from \"./Todo\";\nimport { fetchTodos, toggleTodo, deleteTodo, toggleTab } from \"../actions\";\nimport { TABS } from \"../actions/types\";\n\nclass TodoList extends Component {\n  componentDidMount = async () => {\n    this.props.fetchTodos();\n    try {\n      setInterval(async () => {\n        this.props.fetchTodos();\n      }, 10000);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  removeComplete = () => {\n    this.props.todos.forEach(({ done, _id }) => {\n      if (done) this.props.deleteTodo(_id);\n    });\n  };\n\n  renderTodos = todos => {\n    return todos.map(todo => {\n      return (\n        <Todo\n          key={todo._id}\n          id={todo._id}\n          name={todo.name}\n          done={todo.done}\n          toggleTodo={() => this.props.toggleTodo(todo._id)}\n          deleteTodo={() => this.props.deleteTodo(todo._id)}\n        />\n      );\n    });\n  };\n\n  renderTabs = currTab => {\n    return TABS.map(tab => {\n      return (\n        <button\n          key={tab}\n          className={tab === currTab ? \"button selected\" : \"button\"}\n          onClick={() => this.props.toggleTab(tab)}\n        >\n          {tab}\n        </button>\n      );\n    });\n  };\n\n  rendershowMode = currMode => {\n    return this.state.showMode.map(tab => {\n      return (\n        <button\n          key={tab}\n          className={tab === currMode ? \"button selected\" : \"button\"}\n          onClick={() => this.toggleTodoTab(tab)}\n        >\n          {tab}\n        </button>\n      );\n    });\n  };\n\n  render() {\n    let showTodos = [];\n\n    if (this.state.currMode === \"all\") {\n      showTodos = this.state.todos;\n    } else if (this.state.currMode === \"active\") {\n      showTodos = this.state.todos.filter(todo => !todo.complete);\n    } else if (this.state.currMode === \"complete\") {\n      showTodos = this.state.todos.filter(todo => todo.complete);\n    }\n\n    return (\n      <div>\n        <TodoForm onSubmit={this.addTodo} />\n        <ul className=\"todo-app__list\">{this.renderTodos(showTodos)}</ul>\n\n        <footer className=\"todo-app__footer\" id=\"todo-footer\">\n          <div className=\"todo-app__total\">\n            todos left: {this.state.todos.filter(todo => !todo.complete).length}\n          </div>\n\n          <ul className=\"todo-app__view-buttons\">\n            {this.rendershowMode(this.state.currMode)}\n          </ul>\n\n          <ul className=\"todo-app__clean\">\n            {this.state.todos.some(todo => todo.complete) ? (\n              <button className=\"button clear\" onClick={this.removeComplete}>\n                remove completed\n              </button>\n            ) : null}\n          </ul>\n        </footer>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = ({ todos, currTab }) => {\n  return { todos, currTab };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchTodos, toggleTodo, deleteTodo, toggleTab }\n)(TodoList);\n"]},"metadata":{},"sourceType":"module"}