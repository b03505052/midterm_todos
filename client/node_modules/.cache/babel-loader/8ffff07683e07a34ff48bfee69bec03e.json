{"ast":null,"code":"import _regeneratorRuntime from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/dennis/\\u684C\\u9762/midterm_ToDoList/client/src/components/TodoList.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport TodoForm from \"./TodoForm\";\nimport Todo from \"./Todo\";\nimport { fetchTodos, toggleTodo, deleteTodo, toggleTab } from \"../actions\";\nimport { TABS } from \"../actions/types\";\n\nvar TodoList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TodoList, _Component);\n\n  function TodoList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TodoList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TodoList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.props.fetchTodos();\n\n              try {\n                setInterval(\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee() {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _this.props.fetchTodos();\n\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                })), 10000);\n              } catch (e) {\n                console.log(e);\n              }\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.removeComplete = function () {\n      _this.props.todos.forEach(function (_ref3) {\n        var done = _ref3.done,\n            _id = _ref3._id;\n        if (done) _this.props.deleteTodo(_id);\n      });\n    };\n\n    _this.removeAll = function () {\n      _this.props.todos.forEach(function (_ref4) {\n        var done = _ref4.done,\n            _id = _ref4._id;\n\n        _this.props.deleteTodo(_id);\n      });\n    };\n\n    _this.renderTodos = function (todos) {\n      return todos.map(function (todo) {\n        return React.createElement(Todo, {\n          key: todo._id,\n          id: todo._id,\n          name: todo.name,\n          done: todo.done,\n          toggleTodo: function toggleTodo() {\n            return _this.props.toggleTodo(todo._id);\n          },\n          deleteTodo: function deleteTodo() {\n            return _this.props.deleteTodo(todo._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        });\n      });\n    };\n\n    _this.renderTabs = function (currTab) {\n      return TABS.map(function (tab) {\n        return React.createElement(\"button\", {\n          key: tab,\n          style: {\n            color: tab === currTab ? \"#fff\" : \"#6c6777\",\n            background: tab === currTab ? \"#6c6777\" : \"#fff\"\n          },\n          onClick: function onClick() {\n            return _this.props.toggleTab(tab);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, tab);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(TodoList, [{\n    key: \"render\",\n    // renderClear todos => {\n    //   return todos.map(todo => {\n    //     return (\n    //       <Todo\n    //         key={todo._id}\n    //         id={todo._id}\n    //         name={todo.name}\n    //         done={todo.done}\n    //         toggleTodo={() => this.props.toggleTodo(todo._id)}\n    //         deleteTodo={() => this.props.deleteTodo(todo._id)}\n    //       />\n    //     );\n    //   });\n    // };\n    value: function render() {\n      var todos = [];\n\n      if (this.props.currTab === \"all\") {\n        todos = this.props.todos;\n      } else if (this.props.currTab === \"active\") {\n        todos = this.props.todos.filter(function (todo) {\n          return !todo.done;\n        });\n      } else if (this.props.currTab === \"done\") {\n        todos = this.props.todos.filter(function (todo) {\n          return todo.done;\n        });\n      }\n\n      return React.createElement(\"article\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(TodoForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        className: \"todo-app__list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, this.renderTodos(todos)), React.createElement(\"footer\", {\n        className: \"todo-app__footer\",\n        id: \"todo-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"todo-app__total\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"todos left: \", this.props.todos.filter(function (todo) {\n        return !todo.done;\n      }).length), React.createElement(\"ul\", {\n        className: \"todo-app__view-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, this.props.todos.length ? this.renderTabs(this.props.currTab) : null), React.createElement(\"ul\", {\n        className: \"todo-app__clean\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.removeComplete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Clear completed\"), React.createElement(\"button\", {\n        onClick: this.removeAll,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Clear all\"))));\n    }\n  }]);\n\n  return TodoList;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_ref5) {\n  var todos = _ref5.todos,\n      currTab = _ref5.currTab;\n  return {\n    todos: todos,\n    currTab: currTab\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchTodos: fetchTodos,\n  toggleTodo: toggleTodo,\n  deleteTodo: deleteTodo,\n  toggleTab: toggleTab\n})(TodoList);","map":{"version":3,"sources":["/home/dennis/桌面/midterm_ToDoList/client/src/components/TodoList.js"],"names":["React","Component","connect","TodoForm","Todo","fetchTodos","toggleTodo","deleteTodo","toggleTab","TABS","TodoList","componentDidMount","props","setInterval","e","console","log","removeComplete","todos","forEach","done","_id","removeAll","renderTodos","map","todo","name","renderTabs","currTab","tab","color","background","filter","length","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport TodoForm from \"./TodoForm\";\nimport Todo from \"./Todo\";\nimport { fetchTodos, toggleTodo, deleteTodo, toggleTab } from \"../actions\";\nimport { TABS } from \"../actions/types\";\n\nclass TodoList extends Component {\n  componentDidMount = async () => {\n    this.props.fetchTodos();\n    try {\n      setInterval(async () => {\n        this.props.fetchTodos();\n      }, 10000);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  removeComplete = () => {\n    this.props.todos.forEach(({ done, _id }) => {\n      if (done) this.props.deleteTodo(_id);\n    });\n  };\n\n  removeAll = () => {\n    this.props.todos.forEach(({ done, _id }) => {\n      this.props.deleteTodo(_id);\n    });\n  };\n\n  renderTodos = todos => {\n    return todos.map(todo => {\n      return (\n        <Todo\n          key={todo._id}\n          id={todo._id}\n          name={todo.name}\n          done={todo.done}\n          toggleTodo={() => this.props.toggleTodo(todo._id)}\n          deleteTodo={() => this.props.deleteTodo(todo._id)}\n        />\n      );\n    });\n  };\n\n  renderTabs = currTab => {\n    return TABS.map(tab => {\n      return (\n        <button\n          key={tab}\n          style={{\n            color: tab === currTab ? \"#fff\" : \"#6c6777\",\n            background: tab === currTab ? \"#6c6777\" : \"#fff\"\n          }}\n          onClick={() => this.props.toggleTab(tab)}\n        >\n          {tab}\n        </button>\n      );\n    });\n  };\n\n  // renderClear todos => {\n  //   return todos.map(todo => {\n  //     return (\n  //       <Todo\n  //         key={todo._id}\n  //         id={todo._id}\n  //         name={todo.name}\n  //         done={todo.done}\n  //         toggleTodo={() => this.props.toggleTodo(todo._id)}\n  //         deleteTodo={() => this.props.deleteTodo(todo._id)}\n  //       />\n  //     );\n  //   });\n  // };\n\n  render() {\n    let todos = [];\n\n    if (this.props.currTab === \"all\") {\n      todos = this.props.todos;\n    } else if (this.props.currTab === \"active\") {\n      todos = this.props.todos.filter(todo => !todo.done);\n    } else if (this.props.currTab === \"done\") {\n      todos = this.props.todos.filter(todo => todo.done);\n    }\n\n    return (\n      <article>\n        <TodoForm />\n\n        <ul className=\"todo-app__list\">{this.renderTodos(todos)}</ul>\n        <footer className=\"todo-app__footer\" id=\"todo-footer\">\n          <div className=\"todo-app__total\">\n            todos left: {this.props.todos.filter(todo => !todo.done).length}\n          </div>\n          <ul className=\"todo-app__view-buttons\">\n            {this.props.todos.length\n              ? this.renderTabs(this.props.currTab)\n              : null}\n          </ul>\n          <ul className=\"todo-app__clean\">\n            <button onClick={this.removeComplete}>Clear completed</button>\n            <button onClick={this.removeAll}>Clear all</button>\n          </ul>\n        </footer>\n      </article>\n    );\n  }\n}\n\nconst mapStateToProps = ({ todos, currTab }) => {\n  return { todos, currTab };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchTodos, toggleTodo, deleteTodo, toggleTab }\n)(TodoList);\n"]},"metadata":{},"sourceType":"module"}